<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<title>RideFare</title>
	<!-- Materialize CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
	<!-- google icons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!-- link to style.css -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
	<nav>
		<div class="nav-wrapper">
			<a href="#" class="brand-logo center"><i class="material-icons">directions_car</i>RideFare</a>
		</div>
	</nav>

	<div class="parallax-container valign-wrapper">
		<div class="row">
			<form class="col s12">
				<div class="row">
					<div class="input-field col s12">
						<i class="material-icons prefix">edit_location</i>
						<input id="icon_start" type="text" class="validate" placeholder="Start location">
						<label for="icon_start"></label>
						<a class="waves-effect waves-light btn" id="button">button</a>
					</div>
				</div>
			</form>	
			<form class="col s12">
				<div class="row">
					<div class="input-field col s12">
						<i class="material-icons prefix">edit_location</i>
						<input id="icon_end" type="text" class="validate" placeholder="End location">
						<label for="icon_end"></label>
					</div>
				</div>
			</form>
		</div>
		<div class="parallax"><img src="assets/images/austin.jpg"></div>
	</div>

	<div class="section white">
		<div class="row container">
			<h2 class="header">Parallax</h2>
			<p class="grey-text text-darken-3 lighten-3">Parallax is an effect where the background content or image in this case, is moved at a different speed than the foreground content while scrolling.</p>
		</div>
	</div>

	<div class="parallax-container valign-wrapper">
		<div class="parallax"><img src="assets/images/austin.jpg"></div>
	</div>

	<footer class="page-footer">
		<div class="container">
			<div class="row">
				<div class="col l6 s12">
					<h5 class="white-text">Footer Content</h5>
					<p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
				</div>
				<div class="col l4 offset-l2 s12">
					<h5 class="white-text">Links</h5>
					<ul>
						<li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
						<li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
						<li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
						<li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
					</ul>
				</div>
			</div>
		</div>
		<div class="footer-copyright">
			<div class="container">
				Â© 2014 Copyright Text
				<a class="grey-text text-lighten-4 right" href="#!">More Links</a>
			</div>
		</div>
	</footer>


	<!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Firebase JavaScript Link -->
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>
	<!-- Link to JS file -->
    <script type="text/javascript" src="assets/javascript/api.js" async></script>

    <script>

    	

    $("#button").on("click", function(){
	    
	var startPoint = $("#icon_start").val().trim();
    	console.log(startPoint);

    	var endPoint = $("#icon_end").val().trim();
    	console.log(endPoint);

    	var startLat;

    	var startLong;

    	var endLong;

    	var endLat;

    	var queryURL = "https://maps.googleapis.com/maps/api/geocode/json?address=" + startPoint + "&key=AIzaSyCVUpJOQ43zmN_hdo0fHcY8aGZ7WacfBzg"
		$.ajax({
			url: queryURL,
			method: 'GET'
		}).done(function(response){
			console.log(response);

			startLat = response.results[0].geometry.location.lat

			startLong = response.results[0].geometry.location.lon 
		});
		
		//This is the API call for the destination
		var queryURL2 = "https://maps.googleapis.com/maps/api/geocode/json?address=" + endPoint + "&key=AIzaSyCVUpJOQ43zmN_hdo0fHcY8aGZ7WacfBzg"
		$.ajax({
			url: queryURL2,
			method: 'GET'
		}).done(function(response){
			console.log(response);

			endLat = response.results[0].geometry.location.lat

			endLong = response.results[0].geometry.location.lon 
		});

		//This is the API call to Uber

		//prices.Array[8].estimate will give us the estimate range as a string i.e. "$16-21"

		//NOTE: the Uber API must be enabled with a host server (e.g. the host github repo)

		//startLat = response.results.Array[0].geometry.location.lat 

		function getUberPriceEstimate() {
			$.ajax({
				url: "https://api.uber.com/v1.2/estimates/price?start_latitude=" + startLat + "&start_longitude=" + startLong + "&end_latitude=" + endLat + "&end_longitude=" + endLong,
				headers: {
					Authorization: "Token " + "i_HMTeuGY4Uob6vuVe6vW17G45oWnlIqugMwi6UA" 
				},
				
				success: function(result) {
					console.log(result);
				}
			});
		}

		getUberPriceEstimate();

    	});

    
    </script>
</body>
</html>
